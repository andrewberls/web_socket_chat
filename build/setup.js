// Generated by CoffeeScript 1.3.3
var sendIfEnter, setup;

sendIfEnter = function(textarea, evt) {
  if (window.socket && evt.keyCode === 13) {
    window.socket.send($(textarea).val());
    return $(textarea).val('');
  }
};

setup = function() {
  var connection_view, socket_messages_list_view, socket_wrapper;
  if (WebSocket) {
    $('.if-web-sockets').show();
  } else {
    $('.no-web-sockets').show();
  }
  socket_wrapper = new SocketWrapper({
    host: 'localhost',
    port: 8080
  });
  connection_view = new ConnectionView({
    model: socket_wrapper
  });
  $('#connect').append(connection_view.$el);
  socket_messages_list_view = new MessageListView({
    model: socket_wrapper
  });
  return $('#messages').append(socket_messages_list_view.$el);
};

$(function() {
  setup();
  return $("#message-input").keyup(function(event) {
    return sendIfEnter(this, event);
  });
});

$(window).unload(function() {
  return window.socket.close();
});
